(()=>{var e={};e.id=698,e.ids=[698],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},27318:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(70260),a=r(28203),l=r(25155),i=r.n(l),n=r(67292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10155)),"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\admin\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\admin\\page.jsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90041:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},60665:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},98729:(e,t,r)=>{Promise.resolve().then(r.bind(r,90736))},89001:(e,t,r)=>{Promise.resolve().then(r.bind(r,90668))},43099:(e,t,r)=>{Promise.resolve().then(r.bind(r,10155))},19539:(e,t,r)=>{Promise.resolve().then(r.bind(r,34512))},79334:(e,t,r)=>{"use strict";var s=r(58686);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},34512:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var s=r(45512),a=r(58009),l=r(79334);function i({activeTab:e,setActiveTab:t}){return(0,s.jsx)("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:(0,s.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Aper\xe7u"},{id:"members",name:"Membres"},{id:"content",name:"Blogs"},{id:"gallery",name:"Galerie"},{id:"events",name:"\xc9v\xe9nements"},{id:"finances",name:"Finances"},{id:"reports",name:"Rapports"}].map(r=>(0,s.jsx)("button",{onClick:()=>t(r.id),className:`py-4 px-1 text-sm font-medium border-b-2 ${e===r.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:r.name},r.id))})})}var n=r(28531),o=r.n(n);function d({title:e,value:t,change:r,icon:a,color:l}){return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:`p-3 rounded-lg ${l}`,children:(0,s.jsx)("span",{className:"text-white text-xl",children:a})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e}),(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:t}),r&&(0,s.jsx)("span",{className:`ml-2 text-sm font-medium ${r.startsWith("+")?"text-green-600":"text-red-600"}`,children:r})]})]})]})})}function c({stats:e,recentActivities:t,pendingApprovals:r,setShowEventModal:a}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(d,{title:"Total des membres",value:e.totalMembers,change:"+12%",icon:"\uD83D\uDC65",color:"bg-indigo-100"}),(0,s.jsx)(d,{title:"Membres actifs",value:e.activeMembers,icon:"✅",color:"bg-green-100"}),(0,s.jsx)(d,{title:"En attente",value:e.pendingMembers,icon:"⏳",color:"bg-yellow-100"}),(0,s.jsx)(d,{title:"Nouveaux messages",value:e.newMessages,icon:"✉️",color:"bg-blue-100"})]}),(0,s.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Actions Rapides"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)(o(),{href:"/dashboard/admin/users/new",className:"p-4 border border-gray-200 rounded-lg text-center hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg inline-block mb-2",children:(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDC65"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Ajouter un membre"})]}),(0,s.jsxs)("button",{onClick:()=>a(!0),className:"p-4 border border-gray-200 rounded-lg text-center hover:border-green-300 hover:bg-green-50 transition-colors",children:[(0,s.jsx)("div",{className:"p-2 bg-green-100 rounded-lg inline-block mb-2",children:(0,s.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAA"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Cr\xe9er un \xe9v\xe9nement"})]}),(0,s.jsxs)(o(),{href:"/dashboard/admin/content/new",className:"p-4 border border-gray-200 rounded-lg text-center hover:border-purple-300 hover:bg-purple-50 transition-colors",children:[(0,s.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg inline-block mb-2",children:(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDCDD"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Publier du contenu"})]}),(0,s.jsxs)(o(),{href:"/dashboard/admin/reports",className:"p-4 border border-gray-200 rounded-lg text-center hover:border-orange-300 hover:bg-orange-50 transition-colors",children:[(0,s.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg inline-block mb-2",children:(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"G\xe9n\xe9rer un rapport"})]})]})})]})]})}function m({onClose:e,onEventCreated:t}){let[r,l]=(0,a.useState)({title:"",description:"",startDate:"",endDate:"",location:"",isOnline:!1,isMemberOnly:!1,maxParticipants:"",registrationRequired:!0,registrationDeadline:"",memberPrice:"",nonMemberPrice:"",category:""}),[i,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[h,g]=(0,a.useState)(0),[p,b]=(0,a.useState)([]),[f,j]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)({name:"",description:""}),[k,C]=(0,a.useState)(null),[M,E]=(0,a.useState)(!1),[S,P]=(0,a.useState)(null),[T,A]=(0,a.useState)(!1),D="dlr034bds",L=async()=>{try{j(!0);let e=await fetch("/api/categories");if(e.ok){let t=await e.json();t.success&&t.data&&t.data.categories?b(t.data.categories):t.categories?b(t.categories):Array.isArray(t)?b(t):b([])}else b([])}catch(e){b([])}finally{j(!1)}},O=(0,a.useCallback)(e=>{let{name:t,value:r,type:s,checked:a}=e.target;"checkbox"===s?l(e=>({...e,[t]:a})):"number"===s?l(e=>({...e,[t]:""===r?"":parseFloat(r)})):l(e=>({...e,[t]:r}))},[]),$=async e=>{try{C(e);let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant.");let s=await fetch(`/api/categories/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw Error(a.message||"Erreur lors de la suppression de la cat\xe9gorie");await L(),r.category===e&&l(e=>({...e,category:""})),d("✅ Cat\xe9gorie supprim\xe9e avec succ\xe8s !"),setTimeout(()=>{d("")},3e3)}catch(e){d(`❌ ${e.message}`)}finally{C(null),E(!1),P(null)}},q=e=>{P(e),E(!0)},I=async()=>{if(!N.name.trim()){d("❌ Veuillez entrer un nom pour la cat\xe9gorie");return}try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant.");let t=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:N.name,description:"description category"})}),r=await t.json();if(!t.ok)throw Error(r.message||"Erreur lors de la cr\xe9ation de la cat\xe9gorie");await L();let s="";s=r.data&&r.data.category?r.data.category.name:r.category?r.category.name:r.name?r.name:N.name;let a=p.find(e=>e.name===s)||p.find(e=>e._id===(r.data?.category?._id||r.category?._id));a?l(e=>({...e,category:a._id})):l(e=>({...e,category:s})),w({name:""}),v(!1),d("✅ Cat\xe9gorie cr\xe9\xe9e avec succ\xe8s !"),setTimeout(()=>{d("")},3e3)}catch(e){d(`❌ ${e.message}`)}},B=(0,a.useCallback)(e=>{let t=e.target.files[0];if(t){if(t.size>5242880){d("❌ L'image ne doit pas d\xe9passer 5MB");return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){d("❌ Veuillez s\xe9lectionner un fichier image valide (JPG, PNG, GIF, WebP)");return}let e=new FileReader;e.onload=e=>{x(e.target.result)},e.readAsDataURL(t),m(t),d("")}},[]),z=(0,a.useCallback)(()=>{m(null),x(null)},[]),_=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset","FAPKREIFEUR"),t.append("cloud_name",D),g(30);let r=await fetch(`https://api.cloudinary.com/v1_1/${D}/image/upload`,{method:"POST",body:t});g(70);let s=await r.json();if(!r.ok)throw Error(s.error?.message||"Erreur lors de l'upload de l'image vers Cloudinary");return g(100),s.secure_url},R=async s=>{s.preventDefault(),n(!0),d(""),g(0);try{let s=localStorage.getItem("authToken");if(!s)throw Error("Token d'authentification manquant. Veuillez vous reconnecter.");if(!r.title||!r.description||!r.startDate||!r.endDate||!r.location||!r.category)throw Error("Veuillez remplir tous les champs obligatoires (*).");let a=new Date(r.startDate),i=new Date(r.endDate);if(a>=i)throw Error("La date de fin doit \xeatre post\xe9rieure \xe0 la date de d\xe9but.");let n=null;if(c)try{d("\uD83D\uDCE4 Upload de l'image vers Cloudinary..."),n=await _(c),d("✅ Image upload\xe9e avec succ\xe8s sur Cloudinary !")}catch(e){throw Error("\xc9chec de l'upload de l'image: "+e.message)}let o={title:r.title,description:r.description,startDate:a.toISOString(),endDate:i.toISOString(),location:r.location,isOnline:r.isOnline,isMemberOnly:r.isMemberOnly,maxParticipants:r.maxParticipants?parseInt(r.maxParticipants):0,registrationRequired:r.registrationRequired,memberPrice:r.memberPrice?parseFloat(r.memberPrice):0,nonMemberPrice:r.nonMemberPrice?parseFloat(r.nonMemberPrice):0,imgUrl:n};r.registrationDeadline&&(o.registrationDeadline=new Date(r.registrationDeadline).toISOString());let u="",h=p.find(e=>e._id===r.category||e.id===r.category);u=h?h.name:r.category,o.category=u;let b=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(o)}),f=await b.json();if(!b.ok)throw Error(f.message||`Erreur ${b.status} lors de la cr\xe9ation de l'\xe9v\xe9nement`);if(f.success)d("✅ \xc9v\xe9nement cr\xe9\xe9 avec succ\xe8s !"),l({title:"",description:"",startDate:"",endDate:"",location:"",isOnline:!1,isMemberOnly:!1,maxParticipants:"",registrationRequired:!0,registrationDeadline:"",memberPrice:"",nonMemberPrice:"",category:""}),m(null),x(null),g(0),t&&t(),setTimeout(()=>{e(),d("")},2e3);else throw Error(f.message||"Erreur lors de la cr\xe9ation de l'\xe9v\xe9nement")}catch(e){d(`❌ ${e.message}`)}finally{n(!1),g(0)}};return(0,s.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-blue-800",children:"Cr\xe9er un nouvel \xe9v\xe9nement"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",disabled:i,children:"✕"})]}),o&&(0,s.jsxs)("div",{className:`p-4 rounded-md mb-6 ${o.includes("✅")||o.includes("\uD83D\uDCE4")?"bg-blue-50 text-blue-700 border border-blue-200":o.includes("❌")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:o}),h>0&&(0,s.jsxs)("span",{className:"text-sm font-medium",children:[h,"%"]})]}),h>0&&(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})})]}),(0,s.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de l'\xe9v\xe9nement (Optionnel)"}),u?(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsx)("img",{src:u,alt:"Aper\xe7u de l'\xe9v\xe9nement",className:"w-full h-48 object-cover rounded-md border border-gray-300"}),(0,s.jsx)("button",{type:"button",onClick:z,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",disabled:i,children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center hover:border-blue-400 transition-colors",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Cliquez pour t\xe9l\xe9charger une image"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF, WebP jusqu'\xe0 5MB"})]}),(0,s.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:B,className:"hidden",id:"event-image-upload",disabled:i}),(0,s.jsx)("label",{htmlFor:"event-image-upload",className:`block w-full mt-2 px-4 py-2 rounded-md text-center transition-colors ${i?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-700 hover:bg-blue-100 cursor-pointer"}`,children:i?"Chargement...":"T\xe9l\xe9charger une image"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de l'\xe9v\xe9nement *"}),(0,s.jsx)("input",{type:"text",name:"title",required:!0,value:r.title,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Congr\xe8s International de Cosm\xe9tologie 2024",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cat\xe9gorie *"}),(0,s.jsx)("button",{type:"button",onClick:()=>v(!y),className:"text-sm text-blue-600 hover:text-blue-800",disabled:i,children:y?"← Retour":"+ Ajouter une cat\xe9gorie"})]}),y?(0,s.jsxs)("div",{className:"space-y-3 border border-gray-300 rounded-md p-3 bg-gray-50",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de la cat\xe9gorie *"}),(0,s.jsx)("input",{type:"text",name:"name",value:N.name,onChange:e=>{let{name:t,value:r}=e.target;w(e=>({...e,[t]:r}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom de la nouvelle cat\xe9gorie",disabled:i})]}),(0,s.jsx)("button",{type:"button",onClick:I,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:i||!N.name.trim(),children:"Cr\xe9er la cat\xe9gorie"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("select",{name:"category",required:!0,value:r.category,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i||f,children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),f?(0,s.jsx)("option",{value:"",disabled:!0,children:"Chargement des cat\xe9gories..."}):0===p.length?(0,s.jsx)("option",{value:"",disabled:!0,children:"Aucune cat\xe9gorie disponible"}):p.map(e=>(0,s.jsx)("option",{value:e._id||e.id,children:e.name},e._id||e.id))]}),!f&&p.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{A(!T)},className:"flex items-center text-sm text-gray-600 hover:text-blue-800",children:[(0,s.jsx)("svg",{className:`w-4 h-4 mr-1 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),T?"Masquer les cat\xe9gories":"G\xe9rer les cat\xe9gories"]}),T&&(0,s.jsxs)("div",{className:"mt-2 border border-gray-200 rounded-md p-3 bg-gray-50",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Liste des cat\xe9gories (",p.length,")"]}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto",children:p.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 rounded",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("span",{className:`text-sm ${r.category===e._id?"text-blue-600 font-medium":"text-gray-700"}`,children:[e.name,r.category===e._id&&" (s\xe9lectionn\xe9e)"]})}),(0,s.jsx)("button",{type:"button",onClick:()=>q(e),disabled:k===e._id||i,className:"text-red-500 hover:text-red-700 text-sm p-1",title:"Supprimer cette cat\xe9gorie",children:k===e._id?(0,s.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-500"}):(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e._id||e.id))})]})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,s.jsx)("textarea",{name:"description",required:!0,value:r.description,onChange:O,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Description d\xe9taill\xe9e de l'\xe9v\xe9nement...",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu *"}),(0,s.jsx)("input",{type:"text",name:"location",required:!0,value:r.location,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Centre de Congr\xe8s de Paris",disabled:i})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de d\xe9but *"}),(0,s.jsx)("input",{type:"datetime-local",name:"startDate",required:!0,value:r.startDate,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin *"}),(0,s.jsx)("input",{type:"datetime-local",name:"endDate",required:!0,value:r.endDate,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre maximum de participants"}),(0,s.jsx)("input",{type:"number",name:"maxParticipants",min:"0",value:r.maxParticipants,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0 pour illimit\xe9",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date limite d'inscription"}),(0,s.jsx)("input",{type:"datetime-local",name:"registrationDeadline",value:r.registrationDeadline,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix membre (DA)"}),(0,s.jsx)("input",{type:"number",name:"memberPrice",step:"0.01",min:"0",value:r.memberPrice,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0.00",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix non-membre (DA)"}),(0,s.jsx)("input",{type:"number",name:"nonMemberPrice",step:"0.01",min:"0",value:r.nonMemberPrice,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0.00",disabled:i})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isOnline",checked:r.isOnline,onChange:O,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"\xc9v\xe9nement en ligne"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isMemberOnly",checked:r.isMemberOnly,onChange:O,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"R\xe9serv\xe9 aux membres"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"registrationRequired",checked:r.registrationRequired,onChange:O,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"Inscription requise"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50",disabled:i,children:"Annuler"}),(0,s.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:i?"Cr\xe9ation en cours...":"Cr\xe9er l'\xe9v\xe9nement"})]})]})]})]})}),M&&S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Confirmer la suppression"}),(0,s.jsxs)("p",{className:"text-gray-700 mb-4",children:["\xcates-vous s\xfbr de vouloir supprimer la cat\xe9gorie"," ",(0,s.jsx)("strong",{children:S.name})," ?"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Cette action est irr\xe9versible. Les \xe9v\xe9nements utilisant cette cat\xe9gorie pourront \xeatre affect\xe9s."}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{E(!1),P(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:k===S._id,children:"Annuler"}),(0,s.jsx)("button",{onClick:()=>$(S._id),disabled:k===S._id,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:bg-red-400 flex items-center",children:k===S._id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})})]})}function u({event:e,eventForm:t,setEventForm:r,eventMessage:l,eventLoading:i,onCancel:n,onUpdate:o}){let[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[x,h]=(0,a.useState)([]),[g,p]=(0,a.useState)(0),b="dlr034bds",f=(0,a.useCallback)(e=>{let{name:t,value:s,type:a,checked:l}=e.target;"checkbox"===a?r(e=>({...e,[t]:l})):"number"===a?r(e=>({...e,[t]:""===s?"":parseFloat(s)})):r(e=>({...e,[t]:s}))},[r]),j=(0,a.useCallback)(e=>{let t=e.target.files[0];if(t){if(t.size>5242880){alert("❌ L'image ne doit pas d\xe9passer 5MB");return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){alert("❌ Veuillez s\xe9lectionner un fichier image valide (JPG, PNG, GIF, WebP)");return}let e=new FileReader;e.onload=e=>{c(e.target.result)},e.readAsDataURL(t),u(t)}},[]),y=(0,a.useCallback)(()=>{u(null),c(null),r(e=>({...e,removeImage:!0}))},[r]),v=(0,a.useCallback)(()=>{u(null),c(e?.imgUrl||null),r(e=>({...e,removeImage:!1}))},[e?.imgUrl,r]),N=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset","FAPKREIFEUR"),t.append("cloud_name",b),p(30);let r=await fetch(`https://api.cloudinary.com/v1_1/${b}/image/upload`,{method:"POST",body:t});p(70);let s=await r.json();if(!r.ok)throw Error(s.error?.message||"Erreur lors de l'upload de l'image vers Cloudinary");return p(100),s.secure_url},w=async t=>{t.preventDefault();let r=null;if(m)try{r=await N(m)}catch(e){alert(`❌ Erreur lors de l'upload de l'image: ${e.message}`),p(0);return}o(e._id,m,r),p(0)},k=e=>{if(!e)return"";try{let t=new Date(e),r=6e4*t.getTimezoneOffset();return new Date(t.getTime()-r).toISOString().slice(0,16)}catch(e){return console.error("Error formatting date:",e),""}};return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border-2 border-blue-200 mt-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Modifier l'\xe9v\xe9nement"}),l&&(0,s.jsx)("div",{className:`p-3 rounded-md mb-4 ${l.includes("✅")||l.includes("succ\xe8s")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:l}),g>0&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 text-blue-700 border border-blue-200 rounded-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDCE4 Upload de l'image vers Cloudinary..."}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[g,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${g}%`}})})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de l'\xe9v\xe9nement"}),d?(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsx)("img",{src:d,alt:"Aper\xe7u de l'\xe9v\xe9nement",className:"w-full h-48 object-cover rounded-md border border-gray-300"}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:y,className:"bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",title:"Supprimer l'image",disabled:i||g>0,children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m&&(0,s.jsx)("button",{type:"button",onClick:v,className:"bg-gray-500 text-white rounded-full p-1 hover:bg-gray-600 transition-colors",title:"Restaurer l'image originale",disabled:i||g>0,children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 text-center",children:m?"Nouvelle image s\xe9lectionn\xe9e":"Image actuelle"}),m&&(0,s.jsx)("p",{className:"text-xs text-blue-500 mt-1 text-center",children:"(Upload direct vers Cloudinary)"})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center hover:border-gray-400 transition-colors",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Cliquez pour t\xe9l\xe9charger une image"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF, WebP jusqu'\xe0 5MB"}),(0,s.jsx)("p",{className:"text-xs text-blue-500 mt-1",children:"(Upload direct vers Cloudinary)"})]}),(0,s.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:j,className:"hidden",id:"event-edit-image-upload",disabled:i||g>0}),(0,s.jsx)("label",{htmlFor:"event-edit-image-upload",className:`block w-full mt-2 px-4 py-2 rounded-md text-center transition-colors cursor-pointer ${i||g>0?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:d?"Changer l'image":"Choisir une image"}),e?.imgUrl&&!d&&(0,s.jsx)("p",{className:"text-xs text-orange-600 mt-1 text-center",children:"⚠️ L'image actuelle sera supprim\xe9e si vous n'en s\xe9lectionnez pas une nouvelle"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre *"}),(0,s.jsx)("input",{type:"text",name:"title",required:!0,value:t.title||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Titre de l'\xe9v\xe9nement",disabled:i||g>0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cat\xe9gorie *"}),(0,s.jsx)("select",{name:"category",required:!0,value:t.category||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i||g>0,children:x.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,s.jsx)("textarea",{name:"description",required:!0,value:t.description||"",onChange:f,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Description de l'\xe9v\xe9nement",disabled:i||g>0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lieu *"}),(0,s.jsx)("input",{type:"text",name:"location",required:!0,value:t.location||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"Lieu de l'\xe9v\xe9nement",disabled:i||g>0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de d\xe9but *"}),(0,s.jsx)("input",{type:"datetime-local",name:"startDate",required:!0,value:k(t.startDate)||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i||g>0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin *"}),(0,s.jsx)("input",{type:"datetime-local",name:"endDate",required:!0,value:k(t.endDate)||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i||g>0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre maximum de participants"}),(0,s.jsx)("input",{type:"number",name:"maxParticipants",min:"0",value:t.maxParticipants||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0 pour illimit\xe9",disabled:i||g>0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date limite d'inscription"}),(0,s.jsx)("input",{type:"datetime-local",name:"registrationDeadline",value:k(t.registrationDeadline)||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",disabled:i||g>0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix membre (DA)"}),(0,s.jsx)("input",{type:"number",name:"memberPrice",step:"0.01",min:"0",value:t.memberPrice||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0.00",disabled:i||g>0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix non-membre (DA)"}),(0,s.jsx)("input",{type:"number",name:"nonMemberPrice",step:"0.01",min:"0",value:t.nonMemberPrice||"",onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"0.00",disabled:i||g>0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isOnline",checked:t.isOnline||!1,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i||g>0}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"\xc9v\xe9nement en ligne"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isMemberOnly",checked:t.isMemberOnly||!1,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i||g>0}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"R\xe9serv\xe9 aux membres"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"registrationRequired",checked:t.registrationRequired||!1,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50",disabled:i||g>0}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"Inscription requise"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50",disabled:i||g>0,children:"Annuler"}),(0,s.jsxs)("button",{type:"submit",disabled:i||g>0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:i?"Mise \xe0 jour...":"Mettre \xe0 jour"})]})]})]})]})}function x({events:e,loading:t,onRefresh:r}){let[l,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)({title:"",description:"",startDate:"",endDate:"",location:"",isOnline:!1,isMemberOnly:!1,maxParticipants:"",registrationRequired:!0,registrationDeadline:"",memberPrice:"",nonMemberPrice:""}),h=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",g=e=>{let t=new Date,r=new Date(e.startDate),s=new Date(e.endDate);return t<r?{status:"upcoming",label:"\xc0 venir",color:"bg-blue-100 text-blue-800"}:t>=r&&t<=s?{status:"ongoing",label:"En cours",color:"bg-green-100 text-green-800"}:{status:"completed",label:"Termin\xe9",color:"bg-gray-100 text-gray-800"}},p=(0,a.useCallback)(e=>{i(e._id),x({title:e.title,description:e.description,startDate:e.startDate?e.startDate.slice(0,16):"",endDate:e.endDate?e.endDate.slice(0,16):"",location:e.location,isOnline:e.isOnline,isMemberOnly:e.isMemberOnly,maxParticipants:e.maxParticipants||"",registrationRequired:e.registrationRequired,registrationDeadline:e.registrationDeadline?e.registrationDeadline.slice(0,16):"",memberPrice:e.memberPrice||"",nonMemberPrice:e.nonMemberPrice||""}),o("")},[]),b=(0,a.useCallback)(()=>{i(null),x({title:"",description:"",startDate:"",endDate:"",location:"",isOnline:!1,isMemberOnly:!1,maxParticipants:"",registrationRequired:!0,registrationDeadline:"",memberPrice:"",nonMemberPrice:""}),o("")},[]),f=async e=>{c(!0),o("");try{let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");if(!m.title||!m.description||!m.startDate||!m.endDate||!m.location)throw Error("Veuillez remplir tous les champs obligatoires.");let s={title:m.title,description:m.description,startDate:new Date(m.startDate).toISOString(),endDate:new Date(m.endDate).toISOString(),location:m.location,isOnline:m.isOnline,isMemberOnly:m.isMemberOnly,maxParticipants:m.maxParticipants?parseInt(m.maxParticipants):0,registrationRequired:m.registrationRequired,registrationDeadline:m.registrationDeadline?new Date(m.registrationDeadline).toISOString():null,memberPrice:m.memberPrice?parseFloat(m.memberPrice):0,nonMemberPrice:m.nonMemberPrice?parseFloat(m.nonMemberPrice):0},a=await fetch(`/api/events/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)}),l=await a.json();if(!a.ok)throw Error(l.message||"Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement");if(l.success)o("✅ \xc9v\xe9nement mis \xe0 jour avec succ\xe8s !"),r(),setTimeout(()=>{i(null),o("")},2e3);else throw Error(l.message||"Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}finally{c(!1)}},j=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9v\xe9nement ?"))try{let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");let s=await fetch(`/api/events/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw Error(a.message||"Erreur lors de la suppression de l'\xe9v\xe9nement");if(a.success)o("✅ \xc9v\xe9nement supprim\xe9 avec succ\xe8s !"),r(),setTimeout(()=>o(""),2e3);else throw Error(a.message||"Erreur lors de la suppression de l'\xe9v\xe9nement")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}};return t?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les \xc9v\xe9nements"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des \xe9v\xe9nements..."})]})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les \xc9v\xe9nements"}),(0,s.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2 text-sm",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{children:"Actualiser"})]})]}),(0,s.jsxs)("div",{className:"p-6",children:[n&&!l&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-4 ${n.includes("✅")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[n.includes("✅")?(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:n})]})}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC5"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg mb-2",children:"Aucun \xe9v\xe9nement trouv\xe9"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Cr\xe9ez votre premier \xe9v\xe9nement pour commencer"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc9v\xe9nement"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lieu"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{let t=g(e);return(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:l===e._id?(0,s.jsx)("td",{colSpan:"6",children:(0,s.jsx)(u,{event:e,eventForm:m,setEventForm:x,eventMessage:n,eventLoading:d,onCancel:b,onUpdate:f})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[e.imageUrl&&(0,s.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.isOnline&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"En ligne"}),e.isMemberOnly&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Membres seulement"}),!e.registrationRequired&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Libre d'acc\xe8s"})]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"font-medium",children:"D\xe9but:"}),(0,s.jsx)("div",{children:h(e.startDate)}),(0,s.jsx)("div",{className:"font-medium mt-2",children:"Fin:"}),(0,s.jsx)("div",{children:h(e.endDate)}),e.registrationDeadline&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-medium mt-2",children:"Inscription:"}),(0,s.jsx)("div",{className:"text-gray-500",children:h(e.registrationDeadline)})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.location}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{children:[e.participantsCount||0," /"," ",e.maxParticipants||"∞"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Membre: ",e.memberPrice||0,"DA"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Non-membre: ",e.nonMemberPrice||0,"DA"]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.color}`,children:t.label})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)("div",{className:"flex flex-col space-y-2",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900 flex items-center space-x-1",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,s.jsx)("span",{children:"Modifier"})]}),(0,s.jsxs)("button",{onClick:()=>j(e._id),className:"text-red-600 hover:text-red-900 flex items-center space-x-1",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,s.jsx)("span",{children:"Supprimer"})]})]})})})]})},e._id)})})]})})]})]})}function h({stats:e,showEventModal:t,setShowEventModal:r}){let[l,i]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),u=async()=>{o(!0);try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await fetch("/api/events",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Erreur lors du chargement des \xe9v\xe9nements");let r=await t.json();if(r.success)i(r.data.events||[]);else throw Error(r.message||"Erreur lors du chargement des \xe9v\xe9nements")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`),i([{_id:"1",title:"Congr\xe8s International de Cosm\xe9tologie 2024",description:"Le plus grand rassemblement de professionnels de la cosm\xe9tique",startDate:"2024-03-15T09:00:00Z",endDate:"2024-03-17T18:00:00Z",location:"Centre de Congr\xe8s de Paris",isOnline:!1,isMemberOnly:!1,maxParticipants:500,registrationRequired:!0,registrationDeadline:"2024-03-10T23:59:00Z",memberPrice:250,nonMemberPrice:450,status:"published",participantsCount:347,imageUrl:"/images/event1.jpg",participants:[]},{_id:"2",title:"Atelier Formulation Naturelle",description:"Apprenez \xe0 cr\xe9er des produits cosm\xe9tiques naturels",startDate:"2024-04-10T14:00:00Z",endDate:"2024-04-10T17:00:00Z",location:"Lyon",isOnline:!1,isMemberOnly:!0,maxParticipants:30,registrationRequired:!0,registrationDeadline:"2024-04-05T23:59:00Z",memberPrice:50,nonMemberPrice:80,status:"published",participantsCount:25,imageUrl:"/images/event2.jpg",participants:[]}])}finally{o(!1)}},h=async(e,t=null)=>{try{c("");let r=localStorage.getItem("authToken");if(!r)throw Error("Token d'authentification manquant");let s=l.find(t=>t._id===e);if(!s)throw Error("\xc9v\xe9nement non trouv\xe9");let a=new FormData;Object.keys(s).forEach(e=>{if("_id"!==e&&"imageUrl"!==e&&"participants"!==e&&"__v"!==e){let t=s[e];null!=t&&a.append(e,t.toString())}}),t&&a.append("image",t);let i=await fetch(`/api/events/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`},body:a}),n=await i.json();if(!i.ok)throw Error(n.message||"Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement");if(n.success)c("✅ \xc9v\xe9nement mis \xe0 jour avec succ\xe8s !"),u(),setTimeout(()=>{c("")},3e3);else throw Error(n.message||"Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},g=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9v\xe9nement ? Cette action est irr\xe9versible."))try{c("");let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");let r=await fetch(`/api/events/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await r.json();if(!r.ok)throw Error(s.message||"Erreur lors de la suppression de l'\xe9v\xe9nement");if(s.success)c("✅ \xc9v\xe9nement supprim\xe9 avec succ\xe8s !"),u(),setTimeout(()=>{c("")},3e3);else throw Error(s.message||"Erreur lors de la suppression de l'\xe9v\xe9nement")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},p=async(e,t)=>{try{c("");let r=localStorage.getItem("authToken");if(!r)throw Error("Token d'authentification manquant");let s="published"===t?"draft":"published",a=await fetch(`/api/events/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({status:s})}),l=await a.json();if(!a.ok)throw Error(l.message||"Erreur lors du changement de statut");if(l.success)c(`✅ \xc9v\xe9nement ${"published"===s?"publi\xe9":"d\xe9sactiv\xe9"} avec succ\xe8s !`),u(),setTimeout(()=>{c("")},3e3);else throw Error(l.message||"Erreur lors du changement de statut")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},b=l.filter(e=>new Date(e.startDate)>new Date),f=l.reduce((e,t)=>e+(t.participantsCount||0),0),j=l.length>0?Math.round(f/l.length):0;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Gestion des \xc9v\xe9nements"}),(0,s.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{children:"Cr\xe9er un \xe9v\xe9nement"})]})]}),d&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-6 ${d.includes("✅")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[d.includes("✅")?(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:d})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800 text-sm",children:"\xc9v\xe9nements Totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:l.length})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800 text-sm",children:"\xc0 venir"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:b.length})]}),(0,s.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,s.jsx)("h3",{className:"font-medium text-yellow-800 text-sm",children:"Participants totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:f})]}),(0,s.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,s.jsx)("h3",{className:"font-medium text-purple-800 text-sm",children:"Moyenne participants"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:j})]})]})]}),(0,s.jsx)(x,{events:l,loading:n,onRefresh:u,onUpdateEvent:h,onDeleteEvent:g,onToggleEventStatus:p}),t&&(0,s.jsx)(m,{onClose:()=>r(!1),onEventCreated:()=>{u(),r(!1)}})]})}let g=[{value:"student",label:"\xc9tudiant"},{value:"professional",label:"Professionnel"},{value:"researcher",label:"Chercheur"},{value:"entrepreneur",label:"Entrepreneur"},{value:"retired",label:"Retrait\xe9"}],p=[{value:"skincare",label:"Soins de la peau"},{value:"research",label:"Recherche"},{value:"business",label:"Business"},{value:"development",label:"D\xe9veloppement"},{value:"marketing",label:"Marketing"}],b=[{value:"pending",label:"En attente"},{value:"active",label:"Actif"},{value:"inactive",label:"Inactif"},{value:"suspended",label:"Suspendu"}],f=[{value:"member",label:"Membre"},{value:"admin",label:"Administrateur"}];function j({member:e,memberForm:t,setMemberForm:r,memberMessage:l,memberLoading:i,onCancel:n,onUpdate:o}){let d=(0,a.useCallback)(e=>{let{name:s,value:a,type:l,checked:i}=e.target;if("checkbox"===l){let e=i?[...t.domainOfInterest,a]:t.domainOfInterest.filter(e=>e!==a);r(t=>({...t,domainOfInterest:e}))}else r(e=>({...e,[s]:a}))},[t.domainOfInterest,r]);return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border-2 border-blue-200 mt-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Modifier le membre"}),l&&(0,s.jsx)("div",{className:`p-3 rounded-md mb-4 ${l.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l}),(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o(e._id)},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",name:"email",required:!0,value:t.email,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"R\xf4le"}),(0,s.jsx)("select",{name:"role",value:t.role,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:f.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe9nom *"}),(0,s.jsx)("input",{type:"text",name:"firstName",required:!0,value:t.firstName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Pr\xe9nom"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),(0,s.jsx)("input",{type:"text",name:"lastName",required:!0,value:t.lastName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:t.phone,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33123456789"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut Professionnel"}),(0,s.jsxs)("select",{name:"professionalStatus",value:t.professionalStatus,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionnez un statut"}),g.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domaines d'int\xe9r\xeat"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:p.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",value:e.value,checked:t.domainOfInterest.includes(e.value),onChange:d,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut d'adh\xe9sion"}),(0,s.jsx)("select",{name:"membershipStatus",value:t.membershipStatus,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:b.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:i,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:i?"Mise \xe0 jour...":"Mettre \xe0 jour"})]})]})]})}function y({members:e,loading:t,onRefresh:r}){let[l,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)({email:"",firstName:"",lastName:"",phone:"",professionalStatus:"",domainOfInterest:[],role:"member",membershipStatus:"pending"}),x=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",h=e=>{let t={active:{color:"bg-green-100 text-green-800",label:"Actif"},pending:{color:"bg-yellow-100 text-yellow-800",label:"En attente"},inactive:{color:"bg-red-100 text-red-800",label:"Inactif"},suspended:{color:"bg-gray-100 text-gray-800",label:"Suspendu"}},r=t[e]||t.pending;return(0,s.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${r.color}`,children:r.label})},g=e=>{let t={admin:{color:"bg-purple-100 text-purple-800",label:"Admin"},member:{color:"bg-blue-100 text-blue-800",label:"Membre"}},r=t[e]||t.member;return(0,s.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${r.color}`,children:r.label})},p=()=>{i(null),u({email:"",firstName:"",lastName:"",phone:"",professionalStatus:"",domainOfInterest:[],role:"member",membershipStatus:"pending"}),o("")},b=async e=>{c(!0),o("");try{let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");if(!m.email||!m.firstName||!m.lastName)throw Error("Veuillez remplir tous les champs obligatoires.");let s={email:m.email,profile:{firstName:m.firstName,lastName:m.lastName,phone:m.phone,professionalStatus:m.professionalStatus,domainOfInterest:m.domainOfInterest,membershipStatus:m.membershipStatus},role:m.role},a=await fetch(`/api/admin/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)}),l=await a.json();if(!a.ok)throw Error(l.message||"Erreur lors de la mise \xe0 jour du membre");if(l.success)o("✅ Membre mis \xe0 jour avec succ\xe8s !"),r(),setTimeout(()=>{i(null),o("")},2e3);else throw Error(l.message||"Erreur lors de la mise \xe0 jour du membre")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}finally{c(!1)}},f=async(e,t)=>{try{let s=localStorage.getItem("authToken");if(!s)throw Error("Token d'authentification manquant");let a=!t,l=await fetch(`/api/admin/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({isActive:a})}),i=await l.json();if(!l.ok)throw Error(i.message||"Erreur lors du changement de statut");if(i.success)o(`✅ Statut ${a?"activ\xe9":"d\xe9sactiv\xe9"} avec succ\xe8s !`),r(),setTimeout(()=>o(""),2e3);else throw Error(i.message||"Erreur lors du changement de statut")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}};return t?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les Membres"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des membres..."})]})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les Membres"})}),(0,s.jsxs)("div",{className:"p-6",children:[n&&!l&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-4 ${n.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:n}),0===e.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Aucun membre trouv\xe9."})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut Professionnel"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xf4le & Statut"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:l===e._id?(0,s.jsx)("td",{colSpan:"6",children:(0,s.jsx)(j,{member:e,memberForm:m,setMemberForm:u,memberMessage:n,memberLoading:d,onCancel:p,onUpdate:b})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.profile?.firstName," ",e.profile?.lastName]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.profile?.domainOfInterest&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.profile.domainOfInterest.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},t))})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.profile?.phone||"Non renseign\xe9"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:e.profile?.professionalStatus||"Non renseign\xe9"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"space-y-1 flex gap-1 items-center ",children:[g(e.role),h(e.profile?.membershipStatus),(0,s.jsx)("div",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Compte actif":"Compte inactif"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(e.createdAt)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)("button",{onClick:()=>f(e._id,e.isActive),className:`${e.isActive?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,children:e.isActive?"D\xe9sactiver":"Activer"})})})]})},e._id))})]})})]})]})}let v=[{value:"student",label:"\xc9tudiant"},{value:"professional",label:"Professionnel"},{value:"researcher",label:"Chercheur"},{value:"entrepreneur",label:"Entrepreneur"},{value:"retired",label:"Retrait\xe9"}],N=[{value:"skincare",label:"Soins de la peau"},{value:"research",label:"Recherche"},{value:"business",label:"Business"},{value:"development",label:"D\xe9veloppement"},{value:"marketing",label:"Marketing"}];function w({onClose:e,onMemberCreated:t}){let[r,l]=(0,a.useState)({email:"",password:"",firstName:"",lastName:"",phone:"",professionalStatus:"professional",domainOfInterest:["skincare","research"],role:"member"}),[i,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),c=(0,a.useCallback)(e=>{let{name:t,value:s,type:a,checked:i}=e.target;if("checkbox"===a){let e=i?[...r.domainOfInterest,s]:r.domainOfInterest.filter(e=>e!==s);l(t=>({...t,domainOfInterest:e}))}else l(e=>({...e,[t]:s}))},[r.domainOfInterest]),m=async s=>{s.preventDefault(),n(!0),d("");try{if(!r.email||!r.password||!r.firstName||!r.lastName)throw Error("Veuillez remplir tous les champs obligatoires.");if(r.password.length<6)throw Error("Le mot de passe doit contenir au moins 6 caract\xe8res.");let s={email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName,phone:r.phone,professionalStatus:r.professionalStatus,domainOfInterest:r.domainOfInterest,role:r.role},a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await a.json();if(!a.ok)throw Error(i.message||"Erreur lors de la cr\xe9ation du membre");if(i.success)d("✅ Membre cr\xe9\xe9 avec succ\xe8s !"),l({email:"",password:"",firstName:"",lastName:"",phone:"",professionalStatus:"professional",domainOfInterest:["skincare","research"],role:"member"}),t(),setTimeout(()=>{e(),d("")},2e3);else throw Error(i.message||"Erreur lors de la cr\xe9ation du membre")}catch(e){console.error("Erreur:",e),d(`❌ ${e.message}`)}finally{n(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-blue-800",children:"Ajouter un nouveau membre"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"✕"})]}),o&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-6 ${o.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:o}),(0,s.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",name:"email",required:!0,value:r.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe *"}),(0,s.jsx)("input",{type:"password",name:"password",required:!0,value:r.password,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Au moins 6 caract\xe8res",minLength:"6"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe9nom *"}),(0,s.jsx)("input",{type:"text",name:"firstName",required:!0,value:r.firstName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Pr\xe9nom"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),(0,s.jsx)("input",{type:"text",name:"lastName",required:!0,value:r.lastName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nom"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:r.phone,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+33123456789"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut Professionnel"}),(0,s.jsx)("select",{name:"professionalStatus",value:r.professionalStatus,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domaines d'int\xe9r\xeat *"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:N.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",value:e.value,checked:r.domainOfInterest.includes(e.value),onChange:c,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"R\xf4le"}),(0,s.jsxs)("select",{name:"role",value:r.role,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"member",children:"Membre"}),(0,s.jsx)("option",{value:"admin",children:"Administrateur"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:i,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:i?"Cr\xe9ation en cours...":"Cr\xe9er le membre"})]})]})]})})})}function k({stats:e,setStats:t}){let[r,l]=(0,a.useState)([]),[i,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),c=async()=>{n(!0);try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await fetch("/api/admin/users?noLimit=true",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Erreur lors du chargement des membres");let r=await t.json();if(r.success)l(r.data.users||[]),m(r.data.users);else throw Error(r.message||"Erreur lors du chargement des membres")}catch(e){console.error("Erreur:",e),l(demoMembers),m(demoMembers)}finally{n(!1)}},m=e=>{let r=e.length,s=e.filter(e=>e.isActive).length,a=e.filter(e=>e.profile?.membershipStatus==="pending").length;t(e=>({...e,totalMembers:r,activeMembers:s,pendingMembers:a}))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Gestion des Membres"}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"+ Ajouter un membre"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800",children:"Membres Totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.totalMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800",children:"Membres Actifs"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.activeMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-yellow-800",children:"En Attente"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.pendingMembers})]})]})]}),(0,s.jsx)(y,{members:r,loading:i,onRefresh:c}),o&&(0,s.jsx)(w,{onClose:()=>d(!1),onMemberCreated:c})]})}function C({article:e,articleForm:t,setArticleForm:r,articleMessage:l,articleLoading:i,onCancel:n,onUpdate:o}){let[d,c]=(0,a.useState)(""),m=(0,a.useCallback)(e=>{let{name:t,value:s,type:a,checked:l}=e.target;"checkbox"===a?r(e=>({...e,[t]:l})):r(e=>({...e,[t]:s}))},[r]),u=(0,a.useCallback)(()=>{d.trim()&&!t.tags.includes(d.trim())&&(r(e=>({...e,tags:[...e.tags,d.trim()]})),c(""))},[d,t.tags,r]),x=(0,a.useCallback)(e=>{r(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},[r]),h=(0,a.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),u())},[u]);return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border-2 border-blue-200 mt-4",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Modifier l'article"}),l&&(0,s.jsx)("div",{className:`p-3 rounded-md mb-4 ${l.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:l}),(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),o(e._id)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre *"}),(0,s.jsx)("input",{type:"text",name:"title",required:!0,value:t.title,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Titre de l'article"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extrait *"}),(0,s.jsx)("textarea",{name:"excerpt",required:!0,value:t.excerpt,onChange:m,rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Court r\xe9sum\xe9 de l'article",maxLength:"200"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.excerpt.length,"/200 caract\xe8res"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenu *"}),(0,s.jsx)("textarea",{name:"content",required:!0,value:t.content,onChange:m,rows:"8",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Contenu complet de l'article"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:h,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ajouter un tag"}),(0,s.jsx)("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Ajouter"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map((e,t)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>x(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isMemberOnly",checked:t.isMemberOnly,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"R\xe9serv\xe9 aux membres seulement"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isPublished",checked:t.isPublished,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"Publier imm\xe9diatement"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:i,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:i?"Mise \xe0 jour...":"Mettre \xe0 jour"})]})]})]})}function M({articles:e,loading:t,onRefresh:r}){let[l,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)({title:"",content:"",excerpt:"",tags:[],isMemberOnly:!1,isPublished:!1}),x=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non publi\xe9",h=e=>e?(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Publi\xe9"}):(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Brouillon"}),g=e=>e?(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Membres seulement"}):(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Public"}),p=e=>{i(e._id),u({title:e.title||"",content:e.content||"",excerpt:e.excerpt||"",tags:e.tags||[],isMemberOnly:e.isMemberOnly||!1,isPublished:e.isPublished||!1}),o("")},b=()=>{i(null),u({title:"",content:"",excerpt:"",tags:[],isMemberOnly:!1,isPublished:!1}),o("")},f=async e=>{c(!0),o("");try{let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");if(!m.title||!m.content||!m.excerpt)throw Error("Veuillez remplir tous les champs obligatoires.");let s={title:m.title,content:m.content,excerpt:m.excerpt,tags:m.tags,isMemberOnly:m.isMemberOnly,isPublished:m.isPublished},a=await fetch(`/api/articles/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)}),l=await a.json();if(!a.ok)throw Error(l.message||"Erreur lors de la mise \xe0 jour de l'article");if(l.success)o("✅ Article mis \xe0 jour avec succ\xe8s !"),r(),setTimeout(()=>{i(null),o("")},2e3);else throw Error(l.message||"Erreur lors de la mise \xe0 jour de l'article")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}finally{c(!1)}},j=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet article ? Cette action est irr\xe9versible."))try{let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");let s=await fetch(`/api/articles/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),a=await s.json();if(!s.ok)throw Error(a.message||"Erreur lors de la suppression de l'article");if(a.success)o("✅ Article supprim\xe9 avec succ\xe8s !"),r(),setTimeout(()=>o(""),2e3);else throw Error(a.message||"Erreur lors de la suppression de l'article")}catch(e){console.error("Erreur:",e),o(`❌ ${e.message}`)}};return t?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les Articles"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des articles..."})]})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tous les Articles"})}),(0,s.jsxs)("div",{className:"p-6",children:[n&&!l&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-4 ${n.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:n}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Aucun article trouv\xe9."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Cr\xe9ez votre premier article pour commencer."})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Article"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Auteur"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut & Acc\xe8s"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vues"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:l===e._id?(0,s.jsx)("td",{colSpan:"7",children:(0,s.jsx)(C,{article:e,articleForm:m,setArticleForm:u,articleMessage:n,articleLoading:d,onCancel:b,onUpdate:f})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:e.excerpt})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.authorId?.email||"Auteur inconnu"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},t))})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"space-y-1 flex items-center gap-1",children:[h(e.isPublished),g(e.isMemberOnly)]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:e.views||0}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(e.publishedAt||e.createdAt)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900",children:"Modifier"}),(0,s.jsx)("button",{onClick:()=>j(e._id),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})})]})},e._id))})]})})]})]})}function E({onClose:e,onArticleCreated:t}){let[r,l]=(0,a.useState)({title:"",content:"",excerpt:"",tags:["tendances","innovation"],isMemberOnly:!1,isPublished:!0}),[i,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(""),u=(0,a.useCallback)(e=>{let{name:t,value:r,type:s,checked:a}=e.target;"checkbox"===s?l(e=>({...e,[t]:a})):l(e=>({...e,[t]:r}))},[]),x=(0,a.useCallback)(()=>{i.trim()&&!r.tags.includes(i.trim())&&(l(e=>({...e,tags:[...e.tags,i.trim()]})),n(""))},[i,r.tags]),h=(0,a.useCallback)(e=>{l(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},[]),g=(0,a.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),x())},[x]),p=async s=>{s.preventDefault(),d(!0),m("");try{let s=localStorage.getItem("authToken");if(!s)throw Error("Token d'authentification manquant");if(!r.title||!r.content||!r.excerpt)throw Error("Veuillez remplir tous les champs obligatoires.");if(r.excerpt.length>200)throw Error("L'extrait ne doit pas d\xe9passer 200 caract\xe8res.");let a={title:r.title,content:r.content,excerpt:r.excerpt,tags:r.tags,isMemberOnly:r.isMemberOnly,isPublished:r.isPublished},i=await fetch("/api/articles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)}),n=await i.json();if(!i.ok)throw Error(n.message||"Erreur lors de la cr\xe9ation de l'article");if(n.success)m("✅ Article cr\xe9\xe9 avec succ\xe8s !"),l({title:"",content:"",excerpt:"",tags:["tendances","innovation"],isMemberOnly:!1,isPublished:!0}),t(),setTimeout(()=>{e(),m("")},2e3);else throw Error(n.message||"Erreur lors de la cr\xe9ation de l'article")}catch(e){console.error("Erreur:",e),m(`❌ ${e.message}`)}finally{d(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-blue-800",children:"Cr\xe9er un nouvel article"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"✕"})]}),c&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-6 ${c.includes("✅")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:c}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre *"}),(0,s.jsx)("input",{type:"text",name:"title",required:!0,value:r.title,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Titre de l'article"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Extrait *"}),(0,s.jsx)("textarea",{name:"excerpt",required:!0,value:r.excerpt,onChange:u,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Court r\xe9sum\xe9 de l'article (max 200 caract\xe8res)",maxLength:"200"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[r.excerpt.length,"/200 caract\xe8res"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenu *"}),(0,s.jsx)("textarea",{name:"content",required:!0,value:r.content,onChange:u,rows:"12",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Contenu complet de l'article"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),onKeyPress:g,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ajouter un tag"}),(0,s.jsx)("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Ajouter"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.tags.map((e,t)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>h(e),className:"ml-2 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isMemberOnly",checked:r.isMemberOnly,onChange:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"R\xe9serv\xe9 aux membres seulement"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isPublished",checked:r.isPublished,onChange:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"Publier imm\xe9diatement"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:o,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:o?"Cr\xe9ation en cours...":"Cr\xe9er l'article"})]})]})]})})})}function S({stats:e,setStats:t}){let[r,l]=(0,a.useState)([]),[i,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),c=async()=>{n(!0);try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await fetch("/api/articles",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Erreur lors du chargement des articles");let r=await t.json();if(r.success)l(r.data.articles||[]),m(r.data.articles);else throw Error(r.message||"Erreur lors du chargement des articles")}catch(t){console.error("Erreur:",t);let e=[{_id:"1",title:"Nouvelles tendances en cosm\xe9tologie 2024",content:"Contenu complet de l'article avec toutes les informations d\xe9taill\xe9es...",excerpt:"D\xe9couvrez les derni\xe8res innovations en cosm\xe9tologie pour l'ann\xe9e 2024",authorId:{_id:"68d477bc406c710d096d8354",email:"membre@example.com"},tags:["tendances","innovation","2024"],isMemberOnly:!1,isPublished:!0,publishedAt:"2025-09-29T13:00:37.601Z",views:150,createdAt:"2025-09-29T13:00:37.602Z",updatedAt:"2025-09-29T13:09:05.215Z"},{_id:"2",title:"Les bienfaits des soins naturels",content:"Exploration des avantages des ingr\xe9dients naturels en cosm\xe9tique...",excerpt:"Pourquoi choisir des soins naturels pour votre peau",authorId:{_id:"68d477bc406c710d096d8354",email:"membre@example.com"},tags:["naturel","soins","peau"],isMemberOnly:!0,isPublished:!1,views:0,createdAt:"2025-09-28T10:30:15.123Z",updatedAt:"2025-09-28T10:30:15.123Z"}];l(e),m(e)}finally{n(!1)}},m=e=>{let r=e.length;e.filter(e=>e.isPublished).length,e.filter(e=>e.isMemberOnly).length,t(e=>({...e,totalResources:r}))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Gestion des Articles"}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"+ Cr\xe9er un article"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800",children:"Articles Totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:r.length})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800",children:"Publi\xe9s"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:r.filter(e=>e.isPublished).length})]}),(0,s.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-purple-800",children:"R\xe9serv\xe9s membres"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:r.filter(e=>e.isMemberOnly).length})]})]})]}),(0,s.jsx)(M,{articles:r,loading:i,onRefresh:c}),o&&(0,s.jsx)(E,{onClose:()=>d(!1),onArticleCreated:c})]})}function P({stats:e}){return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Gestion des Membres"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800",children:"Membres Totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.totalMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800",children:"Membres Actifs"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.activeMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-yellow-800",children:"En Attente"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.pendingMembers})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Voir tous les membres"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Exporter la liste"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Ajouter un membre"})]})]})}function T({stats:e}){return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Gestion des Membres"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800",children:"Membres Totaux"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.totalMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800",children:"Membres Actifs"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.activeMembers})]}),(0,s.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-yellow-800",children:"En Attente"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.pendingMembers})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Voir tous les membres"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Exporter la liste"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Ajouter un membre"})]})]})}function A({onClose:e,onItemCreated:t}){let[r,l]=(0,a.useState)({title:"",description:"",tags:[],isMemberOnly:!1}),[i,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(""),f=e=>{let{name:t,value:r,type:s,checked:a}=e.target;l(e=>({...e,[t]:"checkbox"===s?a:r}))},j=e=>{let t=e.type.split("/")[0];if("image"===t||"video"===t)return t;if(e.type.includes("pdf")||e.type.includes("document")||e.type.includes("text"));else if(e.type.includes("audio"))return"audio";return"document"},y=()=>{u.trim()&&!r.tags.includes(u.trim())&&(l(e=>({...e,tags:[...e.tags,u.trim()]})),x(""))},v=e=>{l(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},N=()=>r.title.trim()?!!i||(b("Un fichier est requis"),!1):(b("Le titre est requis"),!1),w=async s=>{if(s.preventDefault(),N()){g(!0),b("");try{let s=localStorage.getItem("authToken");if(!s)throw Error("Token d'authentification manquant");let a=new FormData;a.append("title",r.title),a.append("description",r.description||""),a.append("isMemberOnly",r.isMemberOnly.toString()),r.tags.length>0&&a.append("tags",JSON.stringify(r.tags)),a.append("file","file"),c&&a.append("fileType",c),console.log(a);let l=await fetch("/api/media",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:JSON.stringify({title:r.title,imgURL:"hey.png",description:"An example image uploaded by admin",fileUrl:"https://example.com/uploads/photo.jpg",fileType:"image",thumbnailUrl:"https://example.com/uploads/thumb.jpg",isMemberOnly:!1,tags:["skincare","workshop"]})}),i=await l.json();if(!l.ok){if(400===l.status)throw Error(i.message||"Donn\xe9es invalides. V\xe9rifiez les informations saisies.");if(413===l.status)throw Error("Le fichier est trop volumineux. Taille maximale: 10MB");throw Error(i.message||"Erreur lors de la cr\xe9ation du m\xe9dia")}if(i.success)t&&t(),e();else throw Error(i.message||"Erreur lors de la cr\xe9ation du m\xe9dia")}catch(e){console.error("Erreur:",e),b(`❌ ${e.message}`)}finally{g(!1)}}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-blue-800",children:"Ajouter un nouveau m\xe9dia"}),(0,s.jsx)("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 border border-red-200 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:p})]})}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fichier *"}),(0,s.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-500 transition-colors",children:(0,s.jsx)("div",{className:"space-y-2 text-center w-full",children:i?(0,s.jsxs)("div",{className:"space-y-2",children:["image"===c&&o?(0,s.jsx)("img",{src:o,alt:"Preview",className:"mx-auto h-48 object-cover rounded-md"}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(e=>{switch(e){case"image":return(0,s.jsx)("svg",{className:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})});case"video":return(0,s.jsx)("svg",{className:"w-12 h-12 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})});case"document":return(0,s.jsx)("svg",{className:"w-12 h-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});case"audio":return(0,s.jsx)("svg",{className:"w-12 h-12 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})});default:return(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}})(c),(0,s.jsx)("p",{className:"mt-2 text-sm font-medium text-gray-900",children:i.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[c?c.charAt(0).toUpperCase()+c.slice(1):""," ","- ",(i.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{n(null),d(null),m("")},className:"text-sm text-red-600 hover:text-red-800",children:"Supprimer le fichier"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-sm text-gray-600",children:[(0,s.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none",children:[(0,s.jsx)("span",{children:"T\xe9l\xe9charger un fichier"}),(0,s.jsx)("input",{id:"file-upload",name:"file",type:"file",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.ppt,.pptx",className:"sr-only",onChange:e=>{let t=e.target.files[0];if(t){n(t);let e=j(t);if(m(e),"image"===e){let e=new FileReader;e.onloadend=()=>{d(e.result)},e.readAsDataURL(t)}else d(null)}},required:!0})]}),(0,s.jsx)("p",{className:"mt-1",children:"ou glisser-d\xe9poser"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Images, vid\xe9os, audio, documents jusqu'\xe0 10MB"})]})})})]}),c&&(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Type de fichier d\xe9tect\xe9:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:"image"===c?"Image":"video"===c?"Vid\xe9o":"audio"===c?"Audio":"document"===c?"Document":c})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",name:"isMemberOnly",checked:r.isMemberOnly,onChange:f,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"R\xe9serv\xe9 aux membres uniquement"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Seuls les membres connect\xe9s pourront voir ce m\xe9dia"})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre *"}),(0,s.jsx)("input",{type:"text",name:"title",value:r.title,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Titre du m\xe9dia",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:r.description,onChange:f,rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Description du m\xe9dia (optionnel)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ajouter un tag (ex: \xe9v\xe9nement, logo, conf\xe9rence)"}),(0,s.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Ajouter"})]}),r.tags.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:r.tags.map(e=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>v(e),className:"ml-2 text-blue-600 hover:text-blue-800 text-lg",children:"\xd7"})]},e))}):(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ajoutez des tags pour mieux organiser vos m\xe9dias"})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:h,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 min-w-[150px] justify-center",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"Envoi en cours..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Ajouter le m\xe9dia"})]})})]})]})]})})})}function D({galleryItems:e,loading:t,onRefresh:r,onUpdateGalleryItem:l,onDeleteGalleryItem:i,onToggleFeaturedStatus:n,onToggleMemberOnlyStatus:o}){let[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)({}),[x,h]=(0,a.useState)("all"),[g,p]=(0,a.useState)("all"),[b,f]=(0,a.useState)(""),[j,y]=(0,a.useState)("createdAt"),[v,N]=(0,a.useState)("desc"),w=e=>({image:"Image",video:"Vid\xe9o",document:"Document",audio:"Audio"})[e]||e,k=e=>e?"Membres uniquement":"Public",C=e=>{c(e._id),u({title:e.title,description:e.description||"",tags:[...e.tags||[]]})},M=e=>{let{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},E=e=>{let t=e.target.value.split(",").map(e=>e.trim()).filter(e=>e);u(e=>({...e,tags:t}))},S=async e=>{console.log(e),await l(e,m),c(null),u({})},P=()=>{c(null),u({})},T=async(e,t)=>{let r=t.target.files[0];r&&await l(e,{},r)},A=e=>{j===e?N("asc"===v?"desc":"asc"):(y(e),N("asc"))},D=e.filter(e=>{if("all"!==x&&e.fileType!==x||"all"!==g&&("memberOnly"===g&&!e.isMemberOnly||"public"===g&&e.isMemberOnly))return!1;if(b){let t=b.toLowerCase();return e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t))}return!0}).sort((e,t)=>{let r=e[j],s=t[j];return(("createdAt"===j||"updatedAt"===j)&&(r=new Date(r),s=new Date(s)),"views"===j&&(r=r||0,s=s||0),"asc"===v)?r<s?-1:r>s?1:0:r>s?-1:r<s?1:0}),L=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return t?(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,s.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"ml-3 text-gray-600",children:"Chargement de la galerie..."})]})}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Type:"}),(0,s.jsx)("select",{value:x,onChange:e=>h(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[{value:"all",label:"Tous"},{value:"image",label:"Images"},{value:"video",label:"Vid\xe9os"},{value:"document",label:"Documents"},{value:"audio",label:"Audio"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Acc\xe8s:"}),(0,s.jsx)("select",{value:g,onChange:e=>p(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[{value:"all",label:"Tous"},{value:"public",label:"Public"},{value:"memberOnly",label:"Membres uniquement"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Rechercher...",value:b,onChange:e=>f(e.target.value),className:"p-2 pl-10 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"}),(0,s.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsx)("button",{onClick:r,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"Rafra\xeechir",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pr\xe9visualisation"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("title"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Titre","title"===j&&(0,s.jsx)("svg",{className:`ml-1 w-4 h-4 ${"asc"===v?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("createdAt"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Date d'ajout","createdAt"===j&&(0,s.jsx)("svg",{className:`ml-1 w-4 h-4 ${"asc"===v?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>A("views"),children:(0,s.jsxs)("div",{className:"flex items-center",children:["Vues","views"===j&&(0,s.jsx)("svg",{className:`ml-1 w-4 h-4 ${"asc"===v?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acc\xe8s"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===D.length?(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("p",{className:"mt-2",children:"Aucun m\xe9dia trouv\xe9"})]})}):D.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"relative group",children:["image"===e.fileType?(0,s.jsx)("img",{src:e.thumbnailUrl||e.fileUrl||"/placeholder-image.jpg",alt:e.title,className:"h-16 w-16 object-cover rounded-md border"}):(0,s.jsx)("div",{className:"h-16 w-16 flex items-center justify-center bg-gray-100 rounded-md border",children:"video"===e.fileType?(0,s.jsx)("svg",{className:"w-8 h-8 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):"audio"===e.fileType?(0,s.jsx)("svg",{className:"w-8 h-8 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}):(0,s.jsx)("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),d===e._id&&"image"===e.fileType?(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-md flex items-center justify-center",children:(0,s.jsxs)("label",{className:"cursor-pointer text-white text-xs p-1 bg-blue-600 rounded hover:bg-blue-700",children:["Changer",(0,s.jsx)("input",{type:"file",accept:"image/*",className:"sr-only",onChange:t=>T(e._id,t)})]})}):null]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:d===e._id?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("input",{type:"text",name:"title",value:m.title,onChange:M,className:"w-full p-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsx)("textarea",{name:"description",value:m.description,onChange:M,rows:"2",className:"w-full p-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description||"Pas de description"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"image"===e.fileType?"bg-blue-100 text-blue-800":"video"===e.fileType?"bg-purple-100 text-purple-800":"document"===e.fileType?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w(e.fileType)})}),(0,s.jsx)("td",{className:"px-6 py-4",children:d===e._id?(0,s.jsx)("input",{type:"text",value:m.tags?.join(", ")||"",onChange:E,className:"w-full p-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"tag1, tag2, tag3"}):(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags?.slice(0,3).map(e=>s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded",children:e},e)),e.tags?.length>3&&(0,s.jsxs)("span",{className:"inline-block px-2 py-1 text-xs bg-gray-200 text-gray-600 rounded",children:["+",e.tags.length-3]}),(!e.tags||0===e.tags.length)&&(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Aucun tag"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L(e.createdAt)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.views?.toLocaleString()||0}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>o&&o(e._id,e.isMemberOnly),className:`px-3 py-1 text-xs font-medium rounded-full ${e.isMemberOnly?"bg-purple-100 text-purple-800 hover:bg-purple-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:k(e.isMemberOnly)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d===e._id?(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>S(e._id),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded",title:"Enregistrer",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("button",{onClick:P,className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Annuler",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Modifier",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:()=>i(e._id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Supprimer",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e._id))})]})}),D.length>0&&(0,s.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage de ",(0,s.jsx)("span",{className:"font-medium",children:"1"})," \xe0"," ",(0,s.jsx)("span",{className:"font-medium",children:D.length})," sur"," ",(0,s.jsx)("span",{className:"font-medium",children:D.length})," \xe9l\xe9ments"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Tri\xe9 par: ",(0,s.jsx)("span",{className:"font-medium",children:"title"===j?"Titre":"createdAt"===j?"Date":"Vues"})," ","(","asc"===v?"Croissant":"D\xe9croissant",")"]})]})})]})}function L({stats:e,showGalleryModal:t,setShowGalleryModal:r}){let[l,i]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),m=async()=>{o(!0);try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await fetch("/api/media",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Erreur lors du chargement de la galerie");let r=await t.json();if(r.success)console.log(r),i(r.data.media||[]);else throw Error(r.message||"Erreur lors du chargement de la galerie")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`),i([{_id:"1",title:"Logo de l'Association",description:"Logo officiel de notre association",fileUrl:"/images/logo.jpg",thumbnailUrl:"/images/logo-thumb.jpg",fileType:"image",isMemberOnly:!1,uploadedBy:"68dc23a5a4dc2af908c4f95f",tags:["logo","officiel","association"],views:1245,createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z"},{_id:"2",title:"\xc9v\xe9nement de Lancement",description:"Photos du dernier \xe9v\xe9nement de lancement",fileUrl:"/images/event-launch.jpg",thumbnailUrl:"/images/event-launch-thumb.jpg",fileType:"image",isMemberOnly:!0,uploadedBy:"68dc23a5a4dc2af908c4f95f",tags:["\xe9v\xe9nement","lancement","r\xe9union"],views:876,createdAt:"2024-02-20T14:45:00Z",updatedAt:"2024-02-20T14:45:00Z"},{_id:"3",title:"Atelier de Formation",description:"Session de formation pour les membres",fileUrl:"/images/workshop.jpg",thumbnailUrl:"/images/workshop-thumb.jpg",fileType:"image",isMemberOnly:!1,uploadedBy:"68dc23a5a4dc2af908c4f95f",tags:["formation","atelier","membres"],views:543,createdAt:"2024-02-28T09:15:00Z",updatedAt:"2024-02-28T09:15:00Z"},{_id:"4",title:"Conf\xe9rence Annuelle",description:"Keynote speaker lors de la conf\xe9rence",fileUrl:"/images/conference.jpg",thumbnailUrl:"/images/conference-thumb.jpg",fileType:"video",isMemberOnly:!1,uploadedBy:"68dc23a5a4dc2af908c4f95f",tags:["conf\xe9rence","keynote","annuelle"],views:321,createdAt:"2024-03-05T16:20:00Z",updatedAt:"2024-03-05T16:20:00Z"}])}finally{o(!1)}},u=async(e,t,r=null)=>{try{c("");let s=localStorage.getItem("authToken");if(!s)throw Error("Token d'authentification manquant");let a={};if(void 0!==t.title&&(a.title=t.title),void 0!==t.description&&(a.description=t.description),void 0!==t.tags&&(a.tags=t.tags),r){let a=new FormData;void 0!==t.title&&a.append("title",t.title),void 0!==t.description&&a.append("description",t.description),void 0!==t.tags&&Array.isArray(t.tags)&&a.append("tags",JSON.stringify(t.tags)),a.append("file",r),console.log("Updating media with file:",e);let l=await fetch(`/api/media/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`},body:a}),i=await l.json();if(!l.ok)throw Error(i.message||"Erreur lors de la mise \xe0 jour de l'\xe9l\xe9ment");if(i.success)c("✅ \xc9l\xe9ment mis \xe0 jour avec succ\xe8s !"),m(),setTimeout(()=>{c("")},3e3);else throw Error(i.message||"Erreur lors de la mise \xe0 jour de l'\xe9l\xe9ment")}else{console.log("Updating media metadata:",e,a);let t=await fetch(`/api/media/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)}),r=await t.json();if(!t.ok)throw Error(r.message||"Erreur lors de la mise \xe0 jour de l'\xe9l\xe9ment");if(r.success)c("✅ \xc9l\xe9ment mis \xe0 jour avec succ\xe8s !"),m(),setTimeout(()=>{c("")},3e3);else throw Error(r.message||"Erreur lors de la mise \xe0 jour de l'\xe9l\xe9ment")}}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},x=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9l\xe9ment ? Cette action est irr\xe9versible."))try{c("");let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");let r=await fetch(`/api/media/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await r.json();if(!r.ok)throw Error(s.message||"Erreur lors de la suppression de l'\xe9l\xe9ment");if(s.success)c("✅ \xc9l\xe9ment supprim\xe9 avec succ\xe8s !"),m(),setTimeout(()=>{c("")},3e3);else throw Error(s.message||"Erreur lors de la suppression de l'\xe9l\xe9ment")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},h=async(e,t)=>{try{c("");let r=localStorage.getItem("authToken");if(!r)throw Error("Token d'authentification manquant");let s=!t,a=await fetch(`/api/media/${e}/member-only`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({isMemberOnly:s})}),l=await a.json();if(!a.ok)throw Error(l.message||"Erreur lors du changement d'acc\xe8s");if(l.success)c(`✅ \xc9l\xe9ment ${s?"r\xe9serv\xe9 aux membres":"rendu public"} avec succ\xe8s !`),m(),setTimeout(()=>{c("")},3e3);else throw Error(l.message||"Erreur lors du changement d'acc\xe8s")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},g=async(e,t)=>{try{c("");let r=localStorage.getItem("authToken");if(!r)throw Error("Token d'authentification manquant");let s=await fetch(`/api/media/${e}/featured`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({isFeatured:!t})}),a=await s.json();if(!s.ok)throw Error(a.message||"Erreur lors du changement de statut vedette");if(a.success)c(`✅ \xc9l\xe9ment ${t?"retir\xe9 des vedettes":"mis en vedette"} avec succ\xe8s !`),m(),setTimeout(()=>{c("")},3e3);else throw Error(a.message||"Erreur lors du changement de statut vedette")}catch(e){console.error("Erreur:",e),c(`❌ ${e.message}`)}},p=l.length,b=l.filter(e=>!e.isMemberOnly).length,f=l.filter(e=>e.isMemberOnly).length,j=l.reduce((e,t)=>e+(t.views||0),0),y=l.filter(e=>"image"===e.fileType).length,v=l.filter(e=>"video"===e.fileType).length;return l.filter(e=>"document"===e.fileType).length,l.filter(e=>"audio"===e.fileType).length,(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Gestion de la Galerie M\xe9dia"}),(0,s.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{children:"Ajouter un m\xe9dia"})]})]}),d&&(0,s.jsx)("div",{className:`p-4 rounded-md mb-6 ${d.includes("✅")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-center",children:[d.includes("✅")?(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:d})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-800 text-sm",children:"Total des M\xe9dias"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:p}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Images:"}),(0,s.jsx)("span",{children:y})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Vid\xe9os:"}),(0,s.jsx)("span",{children:v})]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("h3",{className:"font-medium text-green-800 text-sm",children:"Public"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:b})]}),(0,s.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,s.jsx)("h3",{className:"font-medium text-purple-800 text-sm",children:"Membres uniquement"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:f})]}),(0,s.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,s.jsx)("h3",{className:"font-medium text-orange-800 text-sm",children:"Vues Totales"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:j.toLocaleString()})]})]})]}),(0,s.jsx)(D,{galleryItems:l,loading:n,onRefresh:m,onUpdateGalleryItem:u,onDeleteGalleryItem:x,onToggleMemberOnlyStatus:h,onToggleFeaturedStatus:g}),t&&(0,s.jsx)(A,{onClose:()=>r(!1),onItemCreated:()=>{m(),r(!1)}})]})}function O(){let[e,t]=(0,a.useState)("overview"),[r,n]=(0,a.useState)({totalMembers:0,activeMembers:0,pendingMembers:0,totalEvents:0,upcomingEvents:0,totalResources:0,newMessages:0}),[o,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)([]),[x,g]=(0,a.useState)([]),[p,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),y=(0,l.useRouter)();return o?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto mt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de Bord Administrateur"}),(0,s.jsx)("p",{className:"text-gray-600",children:"G\xe9rez votre association et surveillez l'activit\xe9 des membres"})]}),(0,s.jsxs)("button",{onClick:()=>{o&&(localStorage.removeItem("authToken"),localStorage.removeItem("userData"),localStorage.removeItem("userRole"),y.push("/login"))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{children:"D\xe9connexion"})]})]}),(0,s.jsx)(i,{activeTab:e,setActiveTab:t}),(()=>{let t={stats:r,recentActivities:m,pendingApprovals:x,showEventModal:p,setShowEventModal:b,showGalleryModal:f,setShowGalleryModal:j,setStats:n,isClient:o};switch(e){case"members":return(0,s.jsx)(k,{...t});case"gallery":return(0,s.jsx)(L,{...t});case"content":return(0,s.jsx)(S,{...t});case"events":return(0,s.jsx)(h,{...t});case"finances":return(0,s.jsx)(P,{...t});case"reports":return(0,s.jsx)(T,{...t});default:return(0,s.jsx)(c,{...t})}})()]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-800 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement du tableau de bord..."})]})})}},90668:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var s=r(45512),a=r(92273),l=r(2231);let i=(0,l.Z0)({name:"counter",initialState:{value:0},reducers:{increment:e=>{e.value+=1},decrement:e=>{e.value-=1},reset:e=>{e.value=0},incrementByAmount:(e,t)=>{e.value+=t.payload},decrementByAmount:(e,t)=>{e.value-=t.payload}}}),{increment:n,decrement:o,reset:d,incrementByAmount:c,decrementByAmount:m}=i.actions,u=i.reducer,x=(0,l.U1)({reducer:{counter:u}});function h({children:e}){return(0,s.jsx)(a.Kq,{store:x,children:e})}},10155:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\La-Federation-Algerienne-des-Pharmaciens\\\\src\\\\app\\\\admin\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\admin\\page.jsx","default")},62804:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var s=r(62740),a=r(18896),l=r.n(a),i=r(67710),n=r.n(i);r(61135);var o=r(90736);let d={title:"La F\xe9d\xe9ration Alg\xe9rienne des Pharmaciens",description:"Generated by create next app"};function c({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${l().variable} ${n().variable} antialiased`,children:(0,s.jsx)(o.default,{children:e})})})}},90736:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\La-Federation-Algerienne-des-Pharmaciens\\\\src\\\\lib\\\\store\\\\Providers.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\lib\\store\\Providers.js","default")},61135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,155,531],()=>r(27318));module.exports=s})();