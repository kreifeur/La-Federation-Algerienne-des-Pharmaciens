(()=>{var e={};e.id=547,e.ids=[547],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},53238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(70260),n=r(28203),a=r(25155),i=r.n(a),o=r(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["events",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,21830)),"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\dashboard\\events\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,25611)),"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\dashboard\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\dashboard\\events\\page.jsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/dashboard/events/page",pathname:"/dashboard/events",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98812:(e,t,r)=>{Promise.resolve().then(r.bind(r,21830))},59559:(e,t,r)=>{Promise.resolve().then(r.bind(r,92810))},92810:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(45512),n=r(58009);function a(){let[e,t]=(0,n.useState)("upcoming"),[r,a]=(0,n.useState)({upcoming:[],past:[]}),[i,o]=(0,n.useState)(!0),[l,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),x=async()=>{try{let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await fetch("/api/profile",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Erreur lors du chargement du profil");let r=await t.json();if(r.success&&r.data&&r.data._id)return p(r.data.userId),r.data.userId;throw Error("Impossible de r\xe9cup\xe9rer l'ID utilisateur")}catch(e){throw console.error("Erreur lors du chargement du profil:",e),e}},h=async()=>{try{o(!0),d("");let e=localStorage.getItem("authToken");if(!e)throw Error("Token d'authentification manquant");let t=await x(),r=await fetch("/api/events",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw Error("Erreur lors du chargement des \xe9v\xe9nements");let s=await r.json();if(s.success){let e=new Date,r=[],n=[];s.data.events.forEach(s=>{let a=new Date(s.startDate),i=s.participants?.includes(t);a>=e?r.push({...s,status:i?"registered":"available",type:g(s)}):n.push({...s,status:"completed",type:g(s)})}),a({upcoming:r,past:n})}else throw Error(s.message||"Erreur lors du chargement des \xe9v\xe9nements")}catch(e){console.error("Erreur:",e),d(e.message),a({upcoming:[{_id:"1",title:"Congr\xe8s Annuel de Cosm\xe9tologie",startDate:"2024-09-15T09:00:00Z",location:"Paris, France",type:"congress",status:"available",description:"Le plus grand rassemblement de professionnels de la cosm\xe9tologie en France.",isOnline:!1,isMemberOnly:!1,participants:[]},{_id:"2",title:"Atelier Formulation Naturelle",startDate:"2024-10-05T14:00:00Z",location:"Lyon, France",type:"workshop",status:"available",description:"Apprenez \xe0 formuler des produits cosm\xe9tiques avec des ingr\xe9dients naturels.",isOnline:!1,isMemberOnly:!0,participants:[]}],past:[{_id:"3",title:"Webinaire R\xe9glementation",startDate:"2024-05-12T10:00:00Z",location:"En ligne",type:"webinar",status:"completed",description:"Tout savoir sur les nouvelles r\xe9glementations cosm\xe9tiques en 2024.",isOnline:!0,isMemberOnly:!1,participants:[]}]})}finally{o(!1)}},g=e=>e.isOnline?"webinar":e.title?.toLowerCase().includes("congr\xe8s")||e.title?.toLowerCase().includes("congres")?"congress":e.title?.toLowerCase().includes("atelier")||e.title?.toLowerCase().includes("workshop")||e.title?.toLowerCase().includes("formation")?"workshop":"congress",b=e=>{switch(e){case"registered":return{text:"Inscrit",color:"bg-green-100 text-green-800"};case"available":return{text:"Disponible",color:"bg-blue-100 text-blue-800"};case"pending":return{text:"En attente",color:"bg-yellow-100 text-yellow-800"};case"completed":return{text:"Termin\xe9",color:"bg-gray-100 text-gray-800"};default:return{text:e,color:"bg-gray-100 text-gray-800"}}},v=e=>{switch(e){case"congress":return"\uD83C\uDFA4";case"workshop":return"\uD83D\uDD2C";case"webinar":return"\uD83D\uDCBB";default:return"\uD83D\uDCC5"}},f=e=>new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=async e=>{try{u(e);let t=localStorage.getItem("authToken");if(!t)throw Error("Token d'authentification manquant");let r=m;r||(r=await x()),console.log("Inscription \xe0 l'\xe9v\xe9nement:",e),console.log("User ID:",r),console.log("Token:",t);let s=await fetch(`/api/events/${e}/register`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),n=await s.json();if(console.log("R\xe9ponse de l'API:",n),!s.ok)throw Error(n.message||"Erreur lors de l'inscription");if(n.success)a(t=>({...t,upcoming:t.upcoming.map(t=>t._id===e?{...t,status:"registered",participants:[...t.participants||[],r]}:t)})),alert("âœ… Inscription r\xe9ussie ! Vous \xeates maintenant inscrit \xe0 cet \xe9v\xe9nement.");else throw Error(n.message||"Erreur lors de l'inscription")}catch(e){console.error("Erreur:",e),alert(`âŒ Erreur: ${e.message}`)}finally{u(null)}},y=e=>{let t=w(e),r=e.participants?.length||0,s=e.maxParticipants||"Illimit\xe9";alert(`D\xe9tails de l'\xe9v\xe9nement:

ðŸ“Œ ${e.title}

ðŸ“ ${e.description||"Aucune description"}

ðŸ“… Date: ${f(e.startDate)}
ðŸ“ Lieu: ${e.location}
ðŸ‘¥ Participants: ${r}/${s}
ðŸ’° Prix membre: ${e.memberPrice||0}DA
ðŸ’° Prix non-membre: ${e.nonMemberPrice||0}DA
${e.isOnline?"\uD83D\uDCBB \xc9v\xe9nement en ligne":"\uD83C\uDFE2 \xc9v\xe9nement pr\xe9sentiel"}
${e.isMemberOnly?"\uD83D\uDD12 R\xe9serv\xe9 aux membres":"\uD83D\uDD13 Ouvert \xe0 tous"}
${t?"âœ… Vous \xeates inscrit \xe0 cet \xe9v\xe9nement":"âŒ Vous n'\xeates pas inscrit"}`)},w=e=>!!m&&e.participants?.includes(m);return i?(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\xc9v\xe9nements"})}),(0,s.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des \xe9v\xe9nements..."})]})})]}):(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\xc9v\xe9nements"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"D\xe9couvrez tous nos \xe9v\xe9nements et formations"})]}),(0,s.jsxs)("button",{onClick:h,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{children:"Actualiser"})]})]}),l&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:l})]})}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"flex -mb-px",children:[(0,s.jsxs)("button",{onClick:()=>t("upcoming"),className:`py-4 px-6 text-center font-medium text-sm ${"upcoming"===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["\xc0 venir (",r.upcoming.length,")"]}),(0,s.jsxs)("button",{onClick:()=>t("past"),className:`py-4 px-6 text-center font-medium text-sm ${"past"===e?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Pass\xe9s (",r.past.length,")"]})]})}),(0,s.jsx)("div",{className:"p-6",children:0===r[e].length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC5"}),(0,s.jsxs)("p",{className:"text-gray-600 text-lg mb-2",children:["Aucun \xe9v\xe9nement ","upcoming"===e?"\xe0 venir":"pass\xe9"]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"upcoming"===e?"Revenez plus tard pour d\xe9couvrir nos prochains \xe9v\xe9nements":"Aucun \xe9v\xe9nement pass\xe9 pour le moment"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r[e].map(t=>{let r=w(t),n=b(r?"registered":t.status),a=c===t._id,i=t.participants?.length||0,o=t.maxParticipants||"Illimit\xe9";return(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:v(t.type)}),(0,s.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.color}`,children:n.text}),t.isMemberOnly&&(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Membres"}),t.isOnline&&(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"En ligne"})]})]}),(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:t.title}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description||"Description non disponible"}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,s.jsxs)("span",{children:[i,"/",o," participants"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"truncate",children:f(t.startDate)})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"truncate",children:t.location})]}),"upcoming"===e&&(0,s.jsxs)("div",{className:"flex space-x-2",children:[r?(0,s.jsxs)("button",{className:"flex-1 py-2 bg-green-600 text-white rounded-md text-sm flex items-center justify-center",disabled:!0,children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Inscrit"]}):(0,s.jsx)("button",{onClick:()=>j(t._id),disabled:a,className:"flex-1 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-sm flex items-center justify-center",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}),"Inscription..."]}):"S'inscrire"}),(0,s.jsx)("button",{onClick:()=>y(t),className:"px-3 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 text-sm",children:"D\xe9tails"})]}),"past"===e&&(0,s.jsx)("button",{onClick:()=>y(t),className:"w-full py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 text-sm",children:"Voir les d\xe9tails"})]},t._id)})})})]})]})}},21830:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\La-Federation-Algerienne-des-Pharmaciens\\\\src\\\\app\\\\dashboard\\\\events\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\La-Federation-Algerienne-des-Pharmaciens\\src\\app\\dashboard\\events\\page.jsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,155,531,404],()=>r(53238));module.exports=s})();