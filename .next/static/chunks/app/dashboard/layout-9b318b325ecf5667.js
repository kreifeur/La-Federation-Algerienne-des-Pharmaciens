(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{3819:(e,s,a)=>{Promise.resolve().then(a.bind(a,4872))},6046:(e,s,a)=>{"use strict";var t=a(6658);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},4872:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),r=a(2115),n=a(6046),l=a(8173),o=a.n(l);function i(e){let{user:s}=e,a=(0,n.usePathname)(),r=e=>a===e;return(0,t.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col flex-grow pt-5 overflow-y-auto bg-white border-r",children:[(0,t.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Espace Membre"})}),(0,t.jsx)("div",{className:"mt-8 flex-grow flex flex-col",children:(0,t.jsxs)("nav",{className:"flex-1 px-2 pb-4 space-y-1",children:[[{name:"Tableau de bord",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Mon profil",href:"/dashboard/profile",icon:"\uD83D\uDC64"},{name:"\xc9v\xe9nements",href:"/dashboard/events",icon:"\uD83C\uDFAA"},{name:"Ressources",href:"/dashboard/resources",icon:"\uD83D\uDCDA"},{name:"Annuaire",href:"/dashboard/directory",icon:"\uD83D\uDCC7"},{name:"Messages",href:"/dashboard/messages",icon:"✉️"},{name:"Notifications",href:"/dashboard/notifications",icon:"\uD83D\uDD14"}].map(e=>(0,t.jsxs)(o(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(r(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]},e.name)),(null==s?void 0:s.role)==="admin"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 pt-4 pb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Administration"}),[{name:"Utilisateurs",href:"/dashboard/admin/users",icon:"\uD83D\uDC65"},{name:"Contenus",href:"/dashboard/admin/content",icon:"\uD83D\uDCDD"},{name:"Statistiques",href:"/dashboard/admin/stats",icon:"\uD83D\uDCC8"},{name:"Paiements",href:"/dashboard/admin/payments",icon:"\uD83D\uDCB3"}].map(e=>(0,t.jsxs)(o(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(r(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]},e.name))]})]})})]})})}function c(e){var s;let{user:a}=e,[n,l]=(0,r.useState)(!1);return(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Tableau de Bord"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Bienvenue, ",null==a?void 0:a.firstName," ",null==a?void 0:a.lastName]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{className:"p-2 text-gray-600 hover:text-gray-900",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>l(!n),className:"flex items-center space-x-2 focus:outline-none",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-medium",children:null==a?void 0:null===(s=a.firstName)||void 0===s?void 0:s.charAt(0)})}),(0,t.jsxs)("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:[null==a?void 0:a.firstName," ",null==a?void 0:a.lastName]})]}),n&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[(0,t.jsx)("a",{href:"/",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Accueil"}),(0,t.jsx)("a",{href:"/dashboard/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mon profil"}),(0,t.jsx)("div",{className:"border-t border-gray-100"}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("userData"),window.location.href="/login"},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"D\xe9connexion"})]})]})]})]})})}function d(e){let{children:s}=e,[a,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),m=(0,n.useRouter)();return((0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");if(!e){m.push("/login");return}let s=await fetch("/api/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),a=await s.json();console.log(a.data),JSON.parse(localStorage.getItem("user"));let t=a.data;localStorage.setItem("userData",JSON.stringify(t)),l(t),d(!1)})()},[m]),o)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,t.jsx)(i,{user:a}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,t.jsx)(c,{user:a}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:s})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[173,441,517,358],()=>s(3819)),_N_E=e.O()}]);